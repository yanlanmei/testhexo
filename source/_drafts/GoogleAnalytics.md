title: 学习计划
date: 2015-12-25 18:29:00
description: 
categories:
- Skill
tags:
- Robot
toc: true
author:
comments:
original:
permalink: 
---

　　**自用笔记：**本文属于自用笔记，不做详解，仅供参考。在此记录自己已理解并开始遵循的前端代码规范。What How Why
<!-- more -->
[]()

### 学习计划
Google Analytics（Google分析）使用技巧
谷歌分析
Google Analytics（Google分析）是Google的一款免费的网站分析服务，自从其诞生以来，即广受好评。Google Analytics功能非常强大，只要在网站的页面上加入一段代码，就可以提供的丰富详尽的图表式报告。今天，我将总结一下加入代码的一些技巧，使用不同格式的urchinTracker代码，可以跟踪网站上一些特殊事件（例如不会产生综合浏览量的事件、JavaScript事件、文件下载、出站链接等），还可以跟踪制定属性的事件（例如Adsense、完整反向链接等）。当然，阅读这些技巧前请先阅读“Google分析师帮助中心”的主要内容。（后记：部分技巧在最新版本的Google Analytics中已经无法使用）

一、统计非HTML的文件点击

在网页文件中跟踪某一个链接，可以通过在链接 <a> 标记中添加onClick属性来实现，实例如下：

<a href="http://www.williamlong.info/rss.xml" _fcksavedurl=""http://www.williamlong.info/rss.xml"" onClick="javascript:urchinTracker ('/rss.xml'); ">

注意，使用这个属性，必须将 Analytics跟踪代码放在HTML代码前面，最好<body>的下面。

二、跟踪Adwords

Google Analytics官方已经直接支持跟踪Adwords，详细步骤请参看“如何将 Google Analytics（分析）帐户链接到 AdWords 帐户？”。

另外，vdgraaf也提供了一个手动修改代码的方法，也可以实现同样功能，修改的例子是：

_uacct = "**-******-*"; // your urchin code generated by Google Analytics

if( document.referrer )
{
 if( document.referrer.indexOf( 'google' ) != -1 )
 {
  var urlPattern = /(\?|&)q=([^&]*)/;
  var aMatches = urlPattern.exec( document.referrer );
  if( aMatches != null )
  {
   urchinTracker( '/query/' + aMatches[2] );
  }
  else
  {
   urchinTracker();
  }
 }
 else
 {
  urchinTracker();
 }
}
else
{
 urchinTracker();
}

然后在“内容优化”-“内容效果”-“内容细目”里查看目录query的信息，好可以将其内容与“优化市场营销”-“搜索引擎营销”-“按点击付费与自然转化”-Google比较一下Adwords数据。

三、跟踪Adsense点击

我们以前介绍过的Adsense追踪软件只是将用户点击记录下来，并不具备统计功能，如果我们想要对以往的广告点击进行统计，那么可以直接利用Google Analytics来实现统计功能。

实现的大致方法是：

在Google的Adsense广告下面增加如下语句

<script type="text/javascript">
function log() {
urchinTracker ('/adsense');
　　}
　　var elements2;
　　elements2 = document.getElementsByTagName("iframe");
　　for (var i = 0; i < elements2.length; i++) {
　　if(elements2[i].src.indexOf('googlesyndication.com') > -1) {
elements2[i].onfocus = log;
　　}
　　}
　　</script>

　　修改好了以后，请大家不要点击Google广告进行测试，那样会被Google锁定帐户的，大家只要慢慢等待Google Analytics的统计信息即可。

　　另外seobook也介绍了一个方法，原理是基本类似的。

　　四、跟踪所有点出链接

　　使用下面语句可以跟踪所有点出链接。

　　window.onload = setAdsLinks;

　　function setAdsLinks()
　　{
　　 var Links = document.getElementsByTagName( 'A' );
　　 for( var i = 0; i < Links.length; i++ )
　　 {
　　  Links[i].onclick = function() {
　　   urchinTracker( this.href );

　　  }
　　 }
　　}

　　注意，使用这个代码需要将Google Analytics的统计代码放在页面的最前端，另外这种统计有一个副作用，就是如果网页的超级链接非常多的话，这些语句会影响浏览器的性能，甚至引起“假死”的状态。

　　五、显示完整的反向链接

　　统计来源的时候，Google Analytics只显示域名信息，我们可以通过修改统计代码，实现Google Analytics显示完整的反向链接

　　_uacct = "**-******-*"; // 这些是Google Analytics产生的代码

　　//用下面的代码替换原有的代码。
　　if( document.referrer )
　　{
　　 urchinTracker(document.referrer);
　　}
　　else
　　{
　　 urchinTracker();
　　}

　　六、不修改代码显示完整的反向链接

　　Google官方提供了一个不修改代码也可以显示完整来源的方法，就是在“优化市场营销”-“访问者群体细分效果”-“造访来源”，选中来源地址左边的图标，点“跨群体效果”，再点“内容”即可返回来源具体静态URL的数据，这个方法用于静态地址的来源，动态地址（例如搜索结果）用这个会不好用。